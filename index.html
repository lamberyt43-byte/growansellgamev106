<!DOCTYPE html>
<html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>üåæ –í—ã—Ä–∞—Å—Ç–∏ –∏ –ø—Ä–æ–¥–∞–π!</title>

  <style>
    /* –§–æ–Ω –∏–≥—Ä—ã (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–∑–º—ã—Ç—ã–π) */
#game-container {
    filter: blur(8px);
    transition: filter 0.5s ease;
}

/* –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω */
#start-screen {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 1000;
}

.logo-container {
    text-align: center;
    color: white;
}

.logo {
    max-width: 400px;
}

.press-text {
    font-size: 24px;
    margin-top: 20px;
    animation: blink 3s infinite;
}

/* –ú–∏–≥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
@keyframes blink {
    0%, 50%, 100% { opacity: 1; }
    25%, 75% { opacity: 0.3; }
}

body {
  font-family: 'Segoe UI', sans-serif;
  background: #f3f0e5;
  color: #333;
  text-align: center;
  padding: 20px;
}

/* ====== ECLIPSE EVENT STYLES (v121) ====== */
.eclipse-hidden { display: none !important; }

/* Intro popup */
#eclipseIntro {
  position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(180deg, rgba(3,3,6,0.7), rgba(10,0,20,0.9));
  z-index: 14000; padding: 20px;
}
.eclipse-intro-card {
  width: 92%; max-width: 520px; background: linear-gradient(180deg,#120022,#2a0044);
  color: #fff; border-radius: 14px; padding: 22px; text-align:center; box-shadow:0 10px 40px rgba(111,0,255,0.25);
}
.eclipse-intro-card h1 { margin: 0 0 8px; font-size: 28px; letter-spacing: 0.6px; }
.eclipse-intro-card p.small { opacity: 0.75; font-size: 13px; margin-top:6px; }
.eclipse-intro-card button { margin-top:14px; padding:10px 18px; border-radius:10px; border:none;
  background: linear-gradient(90deg,#7a00ff,#ff4d9e); color:white; font-weight:800; cursor:pointer;
  box-shadow: 0 6px 18px rgba(122,0,255,0.18);
}
#eclipseBanner {
  position: fixed;
  top: 70px; /* –±—ã–ª–æ 14px ‚Äî —Ç–µ–ø–µ—Ä—å –±–∞–Ω–Ω–µ—Ä –Ω–∏–∂–µ */
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(90deg,#0a0022,#36004a);
  color:#fff;
  padding: 10px 14px;
  border-radius: 12px;
  z-index: 13000;
  display:flex;
  gap:12px;
  align-items:center;
  box-shadow:0 6px 30px rgba(122,0,255,0.18);
}

#eclipseBanner .eclipse-shards { font-weight:800; }

/* Shop panel */
#eclipseShopPanel {
  position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%);
  background: linear-gradient(180deg,#1a0033,#2b004f); color: #fff;
  padding: 14px; border-radius: 12px; z-index: 13000; width: 320px; box-shadow:0 8px 40px rgba(0,0,0,0.6);
}
#eclipseShopPanel .shop-row { display:flex; gap:8px; justify-content:center; margin-bottom:10px; }
#eclipseShopPanel button { padding:10px 12px; border-radius:10px; border:none; cursor:pointer;
  background: linear-gradient(90deg,#7a00ff,#ff4d9e); color:white; font-weight:800; }
#eclipseShopPanel .shop-msg { min-height:20px; margin-top:8px; font-size:14px; opacity:0.95; }

/* Overlay + case visuals */
#eclipseOverlay {
  position: fixed; inset: 0; z-index: 15000; display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,0.85);
}
#caseContainer { text-align:center; pointer-events:none; }
.case-box { display:inline-block; transform-origin:center; }
.case-emoji { font-size:110px; animation: case-bounce 700ms infinite alternate ease-in-out; }
.case-title { color:#fff; margin-top:10px; font-size:20px; text-shadow:0 4px 20px rgba(160,100,255,0.12); }

/* reward visual (appears in second phase) */
.reward-visual { margin-top:16px; min-height:110px; display:flex; align-items:center; justify-content:center; }

/* reward styles (money/shards/core/plant) */
.reward-item { display:inline-block; padding:12px 18px; border-radius:12px; font-weight:900; color:#111;
  background: linear-gradient(90deg,#fff,#ffd24d); box-shadow: 0 10px 40px rgba(255,200,30,0.18);
  transform-origin:center;
}
.reward-shards { background: linear-gradient(90deg,#a0f0ff,#70e0ff); color:#042; box-shadow:0 10px 30px rgba(0,160,255,0.12);}
.reward-money { background: linear-gradient(90deg,#fff6d7,#ffd48f); color:#472; box-shadow:0 10px 30px rgba(255,180,0,0.12);}
.reward-core { background: linear-gradient(90deg,#3a0066,#b500ff); color:#fff; box-shadow:0 12px 60px rgba(120,0,255,0.45);}

/* particles canvas */
#eclipseParticles { position: fixed; inset: 0; pointer-events:none; z-index:14900; }

/* small animations */
@keyframes case-bounce { from { transform: translateY(0) } to { transform: translateY(-14px) } }
@keyframes reward-pop { from { transform: scale(0.8); opacity:0 } to { transform: scale(1); opacity:1 } }
.reward-item { animation: reward-pop 420ms ease both; }

/* make sure overlay content fits on mobile */
@media (max-width:420px) {
  .case-emoji { font-size:84px; }
  .case-title { font-size:16px; }
  #eclipseShopPanel { width: 92%; bottom: 80px; }
}


.plot.night-skin {
  background: #1e123a;
  border: 2px solid #6b4fe3;
  box-shadow: 0 0 12px rgba(130, 100, 255, 0.6) inset,
              0 0 10px rgba(130, 100, 255, 0.35);
}


#pot {
  font-size: 24px;
  line-height: 24px;
  margin-bottom: 10px;
  text-align: center;
}



.tg-btn {
  display: inline-block;
  padding: 10px 20px;
  background: #0088cc;
  color: white;
  font-weight: bold;
  border-radius: 10px;
  text-decoration: none;
  transition: 0.3s;
}
.tg-btn:hover {
  background: #006699;
}





@keyframes shake {
  0% { transform: translate(0, 0); }
  25% { transform: translate(2px, -2px); }
  50% { transform: translate(-2px, 2px); }
  75% { transform: translate(2px, 2px); }
  100% { transform: translate(0, 0); }
}

.shake {
  animation: shake 0.1s infinite;
}












#plantShop {
  position: fixed;
  top: 70px;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 400px;
  max-height: 70vh;
  background:#fff;
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
  overflow-y: auto;
  z-index: 999;
}

#plantShop h3 {
  margin-top: 0;
}

.shop-list {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.shop-list button {
  width: 110px;
  margin: 6px;
  font-size: 14px;
}

.hidden {
  display: none;
}


#harvestButton {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #ffb74d;
  color: #333;
  padding: 12px 24px;
  font-size: 16px;
  border: none;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  cursor: pointer;
  z-index: 1000;
  transition: background 0.3s;
}

#harvestButton:hover {
  background-color: #ffa000;
}


#moneyBar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: #c5e1a5;
  color:  #333;
  font-weight: bold;
  padding: 10px;
  font-size: 18px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  z-index: 1000;
}


#game {
  max-width: 500px;
  margin: auto;
  background: #fff8f0;
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

button {
  margin: 5px;
  padding: 10px;
  border: none;
  background: #8bc34a;
  color: white;
  font-weight: bold;
  border-radius: 10px;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background:  #689f38;
}

#garden {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.plot {
  width: 80px;
  height: 80px;
  margin: 5px;
  background:#c8e6c9;
  border: 2px dashed #558b2f;
  border-radius: 10px;
  position: relative;
  font-size: 30px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
}

.plot.ready {
  background:#fff59d;
}

.tooltip {
  font-size: 10px;
  position: absolute;
  bottom: 0;
  width: 100%;
  background: rgba(255,255,255,0.7);
  border-radius: 0 0 10px 10px;
}

@keyframes growPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

.plot.growing {
  animation: growPulse 1.5s infinite;
}





  </style>

  
</head>
<body>
  <link rel="stylesheet" href="style.css" />

  <div id="game">
    <h1>üåø –í—ã—Ä–∞—Å—Ç–∏ –∏ –ø—Ä–æ–¥–∞–π</h1>
    <div id="moneyBar">
  üí∞ –®–∞–∫–∏–ª–∏: <span id="money">0</span>
</div>

<!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
<div id="start-screen">
    <div class="logo-container">
        <img src="https://i.postimg.cc/T17J9bRD/Ivent-zatmenia-kosmiceskoe-sianie-removebg-preview.png" alt="Autumn Event Logo" class="logo">
        <p class="press-text">–ù–∞–∂–º–∏—Ç–µ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</p>
    </div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
<div id="game-container">
    <!-- –ó–¥–µ—Å—å —Ç–≤–æ–π –∏–≥—Ä–æ–≤–æ–π –∫–æ–¥ -->
</div>

<!-- ================= ECLIPSE EVENT (–ò–í–ï–ù–¢ –ó–ê–¢–ú–ï–ù–ò–Ø) v121 ================= -->
<!-- Info popup (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è 1 —Ä–∞–∑ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è) -->
<div id="eclipseIntro" class="eclipse-hidden" aria-hidden="true">
  <div class="eclipse-intro-card">
    <h1>üåë –ò–í–ï–ù–¢ –ó–ê–¢–ú–ï–ù–ò–Ø</h1>
    <p>–°–æ–±–∏—Ä–∞–π—Ç–µ <b>—à–∞—Ä–¥—ã</b> –≤–æ –≤—Ä–µ–º—è –∑–∞—Ç–º–µ–Ω–∏—è.<br>–¢—Ä–∞—Ç—å—Ç–µ –∏—Ö –≤ –ú–∞–≥–∞–∑–∏–Ω–µ –∏–≤–µ–Ω—Ç–∞ ‚Äî —à–∞–Ω—Å –≤—ã–ø–∞—Å—Ç—å <b>–Ø–î–†–£ –ó–ê–¢–ú–ï–ù–ò–Ø</b>!</p>
    <p class="small">–ü—Ä–æ–∫—Ä—É—Ç–∫–∏ –∏ –ø–∞–∫–∏ —Ä–∞–∑–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è ‚Äî —É–¥–∞—á–∏, —Ñ–µ—Ä–º–µ—Ä!</p>
    <button id="eclipseIntroOk">–û–∫–µ–π</button>
  </div>
</div>

<!-- Banner (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞—Ç–º–µ–Ω–∏—è) -->
<div id="eclipseBanner" class="eclipse-hidden" role="status" aria-live="polite">
  ‚ö´ <strong>–ò–≤–µ–Ω—Ç –ó–∞—Ç–º–µ–Ω–∏—è</strong>
  <span class="eclipse-shards">üí† <span id="eclipseShards">0</span></span>
  <button id="eclipseShopToggle">üõí</button>
</div>

<!-- Shop (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏) -->
<div id="eclipseShopPanel" class="eclipse-hidden" aria-hidden="true">
  <h3>üåë –ú–∞–≥–∞–∑–∏–Ω –ó–∞—Ç–º–µ–Ω–∏—è</h3>
  <div class="shop-row">
    <button id="buyRandomPack">üéÅ Random Pack ‚Äî 10 000 üí†</button>

  </div>
  <div id="eclipseShopMsg" class="shop-msg"></div>
  <button id="closeEclipseShop">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<!-- Overlay used for case opening animations -->
<div id="eclipseOverlay" class="eclipse-hidden" aria-hidden="true">
  <div id="caseContainer">
    <div id="caseBox" class="case-box">
      <div id="caseEmoji" class="case-emoji">üéÅ</div>
      <div id="caseTitle" class="case-title">–û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—É–Ω–¥—É–∫...</div>
      <div id="rewardVisual" class="reward-visual"></div>
    </div>
  </div>
  <!-- particles canvas -->
  <canvas id="eclipseParticles"></canvas>
</div>
<!-- ================= end ECLIPSE EVENT ================= -->

<audio id="backgroundMusic" loop>
  <source src="https://dl.dropboxusercontent.com/s/bjxm9kwaciies3onzh0ut/Grow-A-Garden-Classic-Easter-Theme-Reupload-1.mp3
" type="audio/">
  –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
</audio>

<div id="statsTab" class="tab" style="display:none;">
  <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
  <p>üå± –ü–æ—Å–∞–∂–µ–Ω–æ: <span id="statsPlanted">0</span></p>
  <p>üåæ –°–æ–±—Ä–∞–Ω–æ: <span id="statsHarvested">0</span></p>
  <p>üí∞ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="statsEarned">0</span></p>
  <button onclick="closeTab('statsTab')">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>




    <div id="upgradeShop">
      <h3>üîß –ú–µ–Ω—é</h3>
      <button onclick="buySlot()">–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—è–¥–∫—É (15üí∞) ‚Äî <span id="slotCount"></span></button>
      <button onclick="buyWatering()">–ü–æ–ª–∏–≤–∞–ª–∫–∞ üåßÔ∏è (10üí∞)</button>
    </div>
    

    <button onclick="toggleShop()">üõí –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω</button>


<div id="plantShop" class="hidden">
  <h3>üå± –ú–∞–≥–∞–∑–∏–Ω —Ä–∞—Å—Ç–µ–Ω–∏–π <button onclick="toggleShop()">‚ùå</button></h3>
  <div id="seedButtons" class="shop-list"></div>
</div>






<button onclick="openTab('skins')">üé® –°–∫–∏–Ω—ã</button>

<div id="shopTab" class="tab" style="display:none;">‚Ä¶</div>
<div id="inventoryTab" class="tab" style="display:none;">‚Ä¶</div>

<div id="skinsTab" class="tab" style="display:none;">
  <h2>–í—ã–±–æ—Ä —Å–∫–∏–Ω–∞ –≥—Ä—è–¥–∫–∏</h2>
  <button onclick="setSkin('default')">–û–±—ã—á–Ω—ã–π</button>
  <button onclick="setSkin('night')">üåô –ù–æ—á–Ω–æ–π</button>
  <br><br>
  <button onclick="closeSkinsTab()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

    <h3>üå± –ì—Ä—è–¥–∫–∏</h3>
    <div id="garden"></div>
  </div>

  <div id="rouletteBox">
  <h3>üé∞ –†—É–ª–µ—Ç–∫–∞</h3>
  <div id="rouletteText">–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ—é —É–¥–∞—á—É!</div>
  <button onclick="spinRoulette()">üé≤ –ö—Ä—É—Ç–∏—Ç—å (5 000üí∞)</button>
</div>

<div id="redeemSection">
  <h3>üéÅ –ö–æ–¥—ã</h3>
  <input type="text" id="redeemInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥">
  <button onclick="redeemCode()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
  <p id="redeemMessage"></p>
</div>



  <a href="https://t.me/+YaDJr4kBFOUyYjEy" target="_blank" class="tg-btn">–ù–∞—à Telegram üì≤</a>

<div id="communityReward" style="text-align:center; margin-top:15px; background:linear-gradient(90deg,#0a0015,#1e0033); color:white; border-radius:10px; padding:10px;">
  <b>üèÜ –ù–∞–≥—Ä–∞–¥–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</b><br>
  <span id="communityProgressText">–ü—Ä–æ–≥—Ä–µ—Å—Å: 0 / 11 üíú</span><br>
  <div style="width:90%; margin:6px auto; background:#111; height:8px; border-radius:6px;">
    <div id="communityProgressFill" style="width:0%; height:100%; background:linear-gradient(90deg,#6f00ff,#ff4d6d); border-radius:6px;"></div>
  </div>
  <div id="communityStatus" style="font-size:12px;">–¶–µ–ª—å: –ø—Ä–æ–º–æ–∫–æ–¥ 500 –º–ª—Ä–¥ üí∞</div>
</div>

</div>

  <script src="game.js"></script>

  <button id="harvestButton" onclick="harvestAll()">–°–æ–±—Ä–∞—Ç—å –≤—Å—ë üåæ</button>

<div id="recordsScreen" style="display:none; padding: 20px;">
  <h2>üèÜ –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</h2>
  <p>üîù –õ—É—á—à–∞—è —Å—É–º–º–∞ —à–∞–∫–∏–ª–µ–π: <span id="bestMoneyDisplay">0</span> üí∞</p>
  <button onclick="hideRecords()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
</div>

<p id="recordUpdateTimer" style="font-size: 12px; color: gray; margin-top: 10px;">
  V121 <span id="updateTime"></span>
</p>

<script>
/* ===== ECLIPSE EVENT v121 (enhanced) =====
   - first-run intro popup (one-time)
   - shard auto-gain every 25s while active
   - shop with Random & Classic packs
   - two-phase open animation + particles
   - auto-plant core and auto-plant random plant if dropped
   - safe: tries to use your existing game variables (garden, seeds, growPlant, money, save, updateUI)
*/

(function(){
  // config
  const SHARD_KEY = "eclipse_shards_v121";
  const INTRO_KEY = "eclipse_intro_seen_v121";
  const RANDOM_PACK_COST = 10000;
  const CLASSIC_PACK_COST = 1000;

  // state
  let shards = parseInt(localStorage.getItem(SHARD_KEY)) || 0;
  let shardTimer = null;
  let overlayLocked = false;

  // elements
  const intro = document.getElementById("eclipseIntro");
  const introOk = document.getElementById("eclipseIntroOk");
  const banner = document.getElementById("eclipseBanner");
  const shardCounter = document.getElementById("eclipseShards");
  const shopToggle = document.getElementById("eclipseShopToggle");
  const shopPanel = document.getElementById("eclipseShopPanel");
  const shopMsg = document.getElementById("eclipseShopMsg");
  const buyRandom = document.getElementById("buyRandomPack");
  const buyClassic = document.getElementById("buyClassicPack");
  const closeShopBtn = document.getElementById("closeEclipseShop");
  const overlay = document.getElementById("eclipseOverlay");
  const caseEmoji = document.getElementById("caseEmoji");
  const caseTitle = document.getElementById("caseTitle");
  const rewardVisual = document.getElementById("rewardVisual");
  const canvas = document.getElementById("eclipseParticles");

  // particles context
  let ctx, particles = [], particleAnimId = null;
  if (canvas) {
    canvas.width = innerWidth; canvas.height = innerHeight;
    ctx = canvas.getContext("2d");
    window.addEventListener("resize", ()=>{ canvas.width = innerWidth; canvas.height = innerHeight; });
  }

  // init UI
  function updateUIShards(){ if (shardCounter) shardCounter.textContent = shards.toLocaleString(); localStorage.setItem(SHARD_KEY, shards); }
  updateUIShards();

  // intro handling (show once)
  window.addEventListener("load", ()=>{
    const seen = localStorage.getItem(INTRO_KEY);
    if (!seen && intro) { intro.classList.remove("eclipse-hidden"); intro.setAttribute("aria-hidden","false"); }
    // if not seen, keep it showing until closed; else auto-start event supply if needed
  });
  if (intro){
    intro.addEventListener("click", (e)=>{
      const ok = e.target.closest && e.target.closest("#eclipseIntro") && e.target.id === "eclipseIntroOk";
      // support click on button only
    });
  }
  if (document.getElementById("eclipseIntroOk")){
    document.getElementById("eclipseIntroOk").addEventListener("click", ()=>{
      localStorage.setItem(INTRO_KEY, "1");
      intro.classList.add("eclipse-hidden");
      intro.setAttribute("aria-hidden","true");
      // don't pause game ‚Äî just close
    });
  }

  // banner & shop toggle
  shopToggle && shopToggle.addEventListener("click", ()=> toggleShop());
  closeShopBtn && closeShopBtn.addEventListener("click", ()=> toggleShop());
  function toggleShop(){
    if (!shopPanel) return;
    const hidden = shopPanel.classList.contains("eclipse-hidden");
    shopPanel.classList.toggle("eclipse-hidden", !hidden);
    shopPanel.setAttribute("aria-hidden", !hidden ? "true" : "false");
  }

  // start "eclipse mode" auto-shards (you wanted manual console activating in previous steps,
  // but we keep the background supply mechanism ‚Äî start it manually with _eclipse.startNow())
  function startEclipseMode(){
    if (shardTimer) return; // already running
    banner && banner.classList.remove("eclipse-hidden");
    // plants glow: add a class to .plot elements if exist
    document.querySelectorAll(".plot").forEach(p => p.classList.add("eclipse-glow-plot"));
    // every 25s grant shards (first in 2s)
    shardTimer = setInterval(()=> grantShards(), 25000);
    // initial delayed grant in 1s to show immediate reaction if wanted
    setTimeout(()=> grantShards(), 1000);
  }
  function stopEclipseMode(){
    if (!shardTimer) return;
    clearInterval(shardTimer); shardTimer = null;
    banner && banner.classList.add("eclipse-hidden");
    document.querySelectorAll(".plot").forEach(p => p.classList.remove("eclipse-glow-plot"));
  }
  function grantShards(){
    // 150..600 base, 1% big drop 2000..5000
    let amount = Math.floor(Math.random() * (600 - 150 + 1)) + 150;
    if (Math.random() < 0.01) amount = Math.floor(Math.random() * (5000 - 2000 + 1)) + 2000;
    shards += amount;
    updateUIShards();
    floating(`üí† –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${amount.toLocaleString()} —à–∞—Ä–¥–æ–≤!`);
  }

  // pack handlers
  buyRandom && buyRandom.addEventListener("click", ()=> {
    if (shards < RANDOM_PACK_COST) { floating("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —à–∞—Ä–¥–æ–≤!"); return; }
    shards -= RANDOM_PACK_COST; updateUIShards();
    openPackSequence("random");
  });
  buyClassic && buyClassic.addEventListener("click", ()=> {
    if (shards < CLASSIC_PACK_COST) { floating("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —à–∞—Ä–¥–æ–≤!"); return; }
    shards -= CLASSIC_PACK_COST; updateUIShards();
    openPackSequence("classic");
  });

  // open pack sequence: two-phase animation, reward selection, visual show
  function openPackSequence(type){
    if (overlayLocked) return;
    overlayLocked = true;
    overlay.classList.remove("eclipse-hidden");
    overlay.setAttribute("aria-hidden","false");
    // reset
    caseEmoji.textContent = "üéÅ"; caseEmoji.classList.remove("hidden"); caseTitle.textContent = "–û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—É–Ω–¥—É–∫...";
    rewardVisual.innerHTML = "";
    // start particle emitter
    startParticles();

    // phase 1: chest bounce -> after 1.2s show "opening..."
    setTimeout(()=> { caseEmoji.textContent = "üí•"; caseTitle.textContent = "–°—É–Ω–¥—É–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è..."; }, 1200);

    // phase 2: reveal reward after 2s
    setTimeout(()=>{
      // determine reward
      let reward = chooseReward(type);
      // show reward visual and animation
      showRewardReveal(reward);
    }, 2200);

    // finish overlay after 4.5s
    setTimeout(()=>{
      stopParticles();
      overlay.classList.add("eclipse-hidden");
      overlay.setAttribute("aria-hidden","true");
      overlayLocked = false;
      // small save/update hooks
      if (typeof save === "function") try{ save(); }catch(e){}
      if (typeof updateUI === "function") try{ updateUI(); }catch(e){}
    }, 4800);
  }

  // chooseReward returns an object { kind: "shards"|"money"|"core"|"plant", value: number, seedIndex?:index, display:string }
  function chooseReward(type){
    if (type === "classic"){
      // only money 100k .. 50M
      const money = Math.floor(Math.random() * (50_000_000 - 100_000 + 1)) + 100_000;
      return { kind: "money", value: money, display: `üí∞ +${money.toLocaleString()} —à–∞–∫–∏–ª–µ–π` };
    }
    // random pack probabilities (conservative core chance)
    const r = Math.random() * 100;
    if (r < 55) { // shards 1000..5000
      const s = Math.floor(Math.random() * (5000 - 1000 + 1)) + 1000;
      return { kind: "shards", value: s, display: `üí† +${s.toLocaleString()} —à–∞—Ä–¥–æ–≤` };
    } else if (r < 90) { // money 1M .. 25M
      const m = Math.floor(Math.random() * (25_000_000 - 1_000_000 + 1)) + 1_000_000;
      return { kind: "money", value: m, display: `üí∞ +${m.toLocaleString()} —à–∞–∫–∏–ª–µ–π` };
    } else if (r < 99) { // big shards
      const s = Math.floor(Math.random() * (15000 - 5000 + 1)) + 5000;
      return { kind: "shards", value: s, display: `üí† –ë–æ–ª—å—à–æ–π –¥—Ä–æ–ø +${s.toLocaleString()} —à–∞—Ä–¥–æ–≤` };
    } else {
      // core (very rare)
      return { kind: "core", value: 0, display: `üåë –Ø–¥—Ä–æ –ó–∞—Ç–º–µ–Ω–∏—è` };
    }
  }

  // show reward reveal visual & apply reward logic
  function showRewardReveal(reward){
    // visual slot
    rewardVisual.innerHTML = "";
    const el = document.createElement("div");
    el.className = "reward-item";
    // style by kind
    if (reward.kind === "shards") { el.classList.add("reward-shards"); el.textContent = `üí† ${reward.value.toLocaleString()}`; }
    else if (reward.kind === "money") { el.classList.add("reward-money"); el.textContent = `üí∞ ${formatMoneyShort(reward.value)}`; }
    else if (reward.kind === "core") { el.classList.add("reward-core"); el.textContent = `üåë –Ø–î–†–û`; }
    else { el.textContent = reward.display; }

    rewardVisual.appendChild(el);
    caseTitle.textContent = `–í–∞–º –≤—ã–ø–∞–ª–æ: ${reward.display}`;

    // extra glow effect for core
    if (reward.kind === "core") {
      // plant core into garden
      plantCoreAutomatically();
      // burst of purple particles
      spawnBurst("purple", 60);
    } else if (reward.kind === "shards") {
      shards += reward.value; updateUIShards();
      spawnBurst("cyan", 22);
    } else if (reward.kind === "money") {
      // add money to player's balance if exists
      if (typeof window.money === "number") { window.money += reward.value; }
      spawnBurst("gold", 20);
    }

    // if there's a seeds array and we wanted plant drops in future, we could auto-plant
  }

// üåü –ê–Ω–∏–º–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —à–∞—Ä–¥–æ–≤
function addShardsAnimated(amount) {
  shards += amount; // —Ç–≤–æ—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —à–∞—Ä–¥–æ–≤
  saveShards();     // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
  document.getElementById("shardCount").textContent = shards;

  const msg = document.createElement("div");
  msg.textContent = `+${amount.toLocaleString()} ü™û`;
  msg.style.position = "fixed";
  msg.style.left = "50%";
  msg.style.top = "60%";
  msg.style.transform = "translate(-50%, -50%)";
  msg.style.fontSize = "28px";
  msg.style.fontWeight = "bold";
  msg.style.color = "#00e5ff";
  msg.style.textShadow = "0 0 10px #00bcd4";
  msg.style.zIndex = "9999";
  msg.style.opacity = "1";
  msg.style.transition = "all 1s ease";

  document.body.appendChild(msg);

  setTimeout(() => {
    msg.style.top = "40%";
    msg.style.opacity = "0";
  }, 100);

  setTimeout(() => msg.remove(), 1200);
}


  // auto-plant core into first free garden slot (tries JS model then DOM)
  function plantCoreAutomatically(){
    // prefer game model if exists
    try {
      if (Array.isArray(window.garden)) {
        // create a minimal plant object consistent with game
        const corePlant = { name: "–Ø–¥—Ä–æ –ó–∞—Ç–º–µ–Ω–∏—è", emoji: "üåë", price: 0, growTime: 70000, start: Date.now(), ready: false, isCore: true };
        const freeIdx = window.garden.findIndex(p=>!p);
        if (freeIdx !== -1) {
          window.garden[freeIdx] = corePlant;
          if (typeof window.growPlant === "function") window.growPlant(freeIdx);
          if (typeof save === "function") save();
          if (typeof updateUI === "function") updateUI();
          floating("üåë –Ø–¥—Ä–æ –ø–æ—Å–∞–∂–µ–Ω–æ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –≥—Ä—è–¥–∫—É!");
          return;
        } else {
          // push to end (queue) and grow
          window.garden.push(corePlant);
          const idx = window.garden.length - 1;
          if (typeof window.growPlant === "function") window.growPlant(idx);
          if (typeof save === "function") save();
          if (typeof updateUI === "function") updateUI();
          floating("üåë –Ø–¥—Ä–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å –ø–æ—Å–∞–¥–∫–∏!");
          return;
        }
      }
    } catch(e){ console.warn("plantCoreAutomatically model error", e); }

    // fallback: try DOM plots (simple)
    const plots = document.querySelectorAll(".plot");
    for (let p of plots) {
      if (!p.textContent.trim()) {
        p.textContent = "üåë";
        p.classList.add("eclipse-core");
        floating("üåë –Ø–¥—Ä–æ –ø–æ—Å–∞–∂–µ–Ω–æ (DOM)!");
        return;
      }
    }
    floating("‚ùå –ù–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö –≥—Ä—è–¥–æ–∫!");
  }

  // particle system (simple)
  function startParticles(){ if (!ctx) return; particles = []; particleLoop(); }
  function stopParticles(){ if (particleAnimId) cancelAnimationFrame(particleAnimId); particleAnimId = null; particles = []; if (ctx) ctx.clearRect(0,0,canvas.width,canvas.height); }
  function particleLoop(){
    if (!ctx) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    // spawn some slow-floating particles
    if (particles.length < 120) {
      particles.push({
        x: Math.random()*canvas.width,
        y: canvas.height*0.65 + Math.random()*100,
        vx: (Math.random()-0.5)*1.2,
        vy: - (0.3 + Math.random()*1.2),
        life: 120 + Math.random()*100,
        size: 2 + Math.random()*3,
        col: (Math.random()<0.5? "rgba(160,240,255,0.9)" : "rgba(200,140,255,0.95)")
      });
    }
    for (let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.x += p.vx; p.y += p.vy; p.life--;
      ctx.beginPath();
      ctx.fillStyle = p.col;
      ctx.globalCompositeOperation = "lighter";
      ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
      ctx.fill();
      if (p.life <= 0 || p.y < -50) particles.splice(i,1);
    }
    particleAnimId = requestAnimationFrame(particleLoop);
  }

  // spawn colorful burst (for reward emphasis)
  function spawnBurst(color, amount){
    if (!ctx) return;
    for (let i=0;i<amount;i++){
      particles.push({
        x: canvas.width/2 + (Math.random()-0.5)*140,
        y: canvas.height/2 + (Math.random()-0.5)*80,
        vx: (Math.random()-0.5)*6,
        vy: (Math.random()-0.8)*-6,
        life: 40 + Math.random()*60,
        size: 2 + Math.random()*4,
        col: color === "purple" ? "rgba(180,80,255,0.98)" : color === "gold" ? "rgba(255,210,80,0.95)" : "rgba(120,220,255,0.95)"
      });
    }
  }

  // utility: floating message
  function floating(text){
    const el = document.createElement("div");
    el.textContent = text;
    Object.assign(el.style, { position:"fixed", bottom:"86px", left:"50%", transform:"translateX(-50%)", background:"rgba(0,0,0,0.78)", color:"#fff", padding:"8px 14px", borderRadius:"10px", zIndex:15100, boxShadow:"0 6px 20px rgba(0,0,0,0.6)" });
    document.body.appendChild(el);
    setTimeout(()=> el.style.opacity = "0", 2200);
    setTimeout(()=> el.remove(), 2800);
  }

  // helper: nice short money formatting for visuals
  function formatMoneyShort(n){
    if (n >= 1_000_000_000) return (n/1_000_000_000).toFixed(2)+"B";
    if (n >= 1_000_000) return (n/1_000_000).toFixed(2)+"M";
    if (n >= 1000) return Math.floor(n/1000)+"k";
    return n.toString();
  }

  // debug admin helpers exposed
  window._eclipse = {
    startNow: startEclipseMode,
    stopNow: stopEclipseMode,
    giveShards: (n)=>{ shards += n; updateUIShards(); floating(`üí† +${n} (dev)`); },
    shards: ()=>shards
  };

  // auto-start eclipse mode only when player chooses? previously you wanted manual console,
  // but we start it automatically if intro was already seen (so new players see popup first)
  window.addEventListener("load", ()=>{
    // if intro seen -> start immediately
    if (localStorage.getItem(INTRO_KEY)) startEclipseMode();
  });

})(); // IIFE end
</script>


  <script>
    let money = parseInt(localStorage.getItem("money")) || 20;
let slots = parseInt(localStorage.getItem("slots")) || 3;
let watering = parseInt(localStorage.getItem("watering")) || 0;
let garden = JSON.parse(localStorage.getItem("garden")) || [];
let displayedMoney = money;
let bestMoney = parseInt(localStorage.getItem("bestMoney")) || 0;
let rouletteSpinsToday =
  parseInt(localStorage.getItem("rouletteSpinsToday")) || 0;
let lastRouletteDate = localStorage.getItem("lastRouletteDate") || "";
let currentPlotSkin = localStorage.getItem("currentPlotSkin") || "default";
let stats = { planted: 0, harvested: 0, earned: 0 };
// ‚öîÔ∏è –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –±–∏—Ç–≤–∞
let chosenSide = localStorage.getItem("chosenSide") || null;
// –°—á—ë—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ —Å—Ç–æ—Ä–æ–Ω
let cosmosVotes = parseInt(localStorage.getItem("cosmosVotes") || "0");
let novaVotes = parseInt(localStorage.getItem("novaVotes") || "0");


// –¥–∞—Ç–∞ –∫–æ–Ω—Ü–∞ –∏–≤–µ–Ω—Ç–∞ (14 –¥–Ω–µ–π)
let eventEnd = localStorage.getItem("eventEnd");
if (!eventEnd) {
  eventEnd = Date.now() + 14 * 24 * 60 * 60 * 1000;
  localStorage.setItem("eventEnd", eventEnd);
}

let achievements = [
  { id: 1, name: "–ü–µ—Ä–≤—ã–π —à–∞–≥", desc: "–ü–æ—Å–∞–¥–∏ –ø–µ—Ä–≤–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ", unlocked: false },
  { id: 2, name: "–§–µ—Ä–º–µ—Ä-–ª—é–±–∏—Ç–µ–ª—å", desc: "–ó–∞—Ä–∞–±–æ—Ç–∞–π 1 000 üí∞", unlocked: false },
  { id: 3, name: "–û–ø—ã—Ç–Ω—ã–π —Å–∞–¥–æ–≤–æ–¥", desc: "–ó–∞—Ä–∞–±–æ—Ç–∞–π 1 000 000 üí∞", unlocked: false },
  { id: 4, name: "–ò–Ω–≤–µ—Å—Ç–æ—Ä", desc: "–ö—É–ø–∏ 10 —Ä–∞–∑–Ω—ã—Ö —Å–µ–º—è–Ω", unlocked: false },
  { id: 5, name: "–†–∞–±–æ—Ç—è–≥–∞", desc: "–°–æ–±–µ—Ä–∏ —É—Ä–æ–∂–∞–π 500 —Ä–∞–∑", unlocked: false },
  { id: 6, name: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å", desc: "–û—Ç–∫—Ä–æ–π 50 –≥—Ä—è–¥–æ–∫", unlocked: false },
  { id: 7, name: "–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä", desc: "–ü–æ–ª—É—á–∏—Ç—å –º—É—Ç–∏—Ä–æ–≤–∞–≤—à–µ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ", unlocked: false },
  { id: 8, name: "–£—á–∞—Å—Ç–Ω–∏–∫ –±–∏—Ç–≤—ã", desc: "–ü—Ä–æ–≥–æ–ª–æ—Å—É–π –∑–∞ –ª—é–±—É—é —Å—Ç–æ—Ä–æ–Ω—É", unlocked: false },
  { id: 9, name: "–ú–∏–ª–ª–∏–∞—Ä–¥–µ—Ä", desc: "–ù–∞–∫–æ–ø–∏ 1 000 000 000 üí∞", unlocked: false },
  { id: 10, name: "–õ–µ–≥–µ–Ω–¥–∞ Grow & Sell", desc: "–î–æ—Å—Ç–∏—á—å 1 000 000 000 000 üí∞", unlocked: false },
];

function renderAchievements() {
  let list = document.getElementById("achievementList");
  list.innerHTML = "";
  achievements.forEach(a => {
    let li = document.createElement("li");
    li.textContent = `${a.unlocked ? "‚úÖ" : "‚ùå"} ${a.name} ‚Äî ${a.desc}`;
    list.appendChild(li);
  });
}

function unlockAchievement(id) {
  let a = achievements.find(x => x.id === id);
  if (a && !a.unlocked) {
    a.unlocked = true;
    alert("üèÜ –ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: " + a.name);
    renderAchievements();
  }
}












function setSkin(skin) {
  currentPlotSkin = skin;
  localStorage.setItem("currentPlotSkin", currentPlotSkin);
  updateUI();
}


const music = document.getElementById("backgroundMusic");

// –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É
music.play();

// –ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–∞—É–∑—É
music.pause();

const maxSlots = 500; // –º–∞–∫—Å–∏–º—É–º —Å–ª–æ—Ç–æ–≤

const seeds = [
  { name: "–õ—É–∫", emoji: "üßÖ", price: 2, growTime: 3000, rarity: "—Å—Ç–∞—Ä—Ç–æ–≤–æ–µ",  },
  { name: "–ú–æ—Ä–∫–æ–≤—å", emoji: "ü•ï", price: 4, growTime: 6000, rarity: "–æ–±—ã—á–Ω–æ–µ", favorite: false
 },
  {
    name: "–ü—Ä–∏–∑—Ä–∞—á–Ω–∞—è –∫–ª—É–±–Ω–∏–∫–∞",
    emoji: "üçì",
    price: 10,
    growTime: 10000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–°–∞—Ö–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ",
    emoji: "üç¨",
    price: 15,
    growTime: 12000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–î–µ—Ä–µ–≤–æ –°–∞—Ç—É—Ä–Ω–∞",
    emoji: "ü™ê",
    price: 20,
    growTime: 15000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–°–≤–µ—Ç–æ—Ñ—Ä—É–∫—Ç",
    emoji: "üí°",
    price: 12,
    growTime: 9000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ú–µ–¥–æ–≤–∞—è —Ç—ã–∫–≤–∞",
    emoji: "üéÉ",
    price: 8,
    growTime: 7000,
    rarity: "–æ–±—ã—á–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –º–∞–ª–∏–Ω–∞",
    emoji: "üõ∏",
    price: 18,
    growTime: 14000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–û–≥–Ω–µ–Ω–Ω–∞—è –≥—Ä—É—à–∞",
    emoji: "üî•",
    price: 9,
    growTime: 7500,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–õ–µ–¥—è–Ω–æ–π –±–∞–Ω–∞–Ω",
    emoji: "‚ùÑÔ∏è",
    price: 11,
    growTime: 8500,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ë–ª–µ—Å—Ç—è—â–∞—è —á–µ—Ä–Ω–∏–∫–∞",
    emoji: "üîµ",
    price: 10,
    growTime: 8000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–†–∞–¥—É–∂–Ω–æ–µ —è–±–ª–æ–∫–æ",
    emoji: "üåà",
    price: 15,
    growTime: 10000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–¢—É–º–∞–Ω–Ω–∞—è –≤–∏—à–Ω—è",
    emoji: "üå´Ô∏è",
    price: 13,
    growTime: 9500,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ö—Ä–∏—Å—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –ø–µ—Ä—Å–∏–∫",
    emoji: "üíé",
    price: 17,
    growTime: 13000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –∞—Ä–±—É–∑",
    emoji: "üåå",
    price: 22,
    growTime: 16000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ó–≤—ë–∑–¥–Ω–∞—è –¥—ã–Ω—è",
    emoji: "‚≠ê",
    price: 16,
    growTime: 11000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ö–æ–∫–∞-—Ñ—Ä—É–∫—Ç",
    emoji: "ü•§",
    price: 12,
    growTime: 8700,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–§—Ä—É–∫—Ç –Ω–æ—á–∏",
    emoji: "üåö",
    price: 14,
    growTime: 9000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–¢–æ–∫—Å–∏—á–Ω—ã–π –ª–∏–º–æ–Ω",
    emoji: "‚ò£Ô∏è",
    price: 8,
    growTime: 6000,
    rarity: "–Ω–µ–æ–±—ã—á–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ë–∞–Ω–∞–Ω-—Ä–∞–∫–µ—Ç–∞",
    emoji: "üöÄ",
    price: 19,
    growTime: 14000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ñ–≤–∞—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ",
    emoji: "ü´ß",
    price: 20,
    growTime: 15000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ú–æ–ª–Ω–∏–µ–≤—ã–π –∞–ø–µ–ª—å—Å–∏–Ω",
    emoji: "‚ö°",
    price: 15,
    growTime: 10000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–õ–∞–∑–µ—Ä–Ω–∞—è —Å–ª–∏–≤–∞",
    emoji: "üî¥",
    price: 13,
    growTime: 9700,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–¢–∞–Ω—Ü—É—é—â–∏–π –∞–Ω–∞–Ω–∞—Å",
    emoji: "üíÉüçç",
    price: 11,
    growTime: 9200,
    rarity: "–Ω–µ–æ–±—ã—á–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ú–∞–≥–∏—á–µ—Å–∫–∞—è –º—è—Ç–∞",
    emoji: "üßôüåø",
    price: 14,
    growTime: 10000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è –º–æ—Ä–∫–æ–≤–∫–∞",
    emoji: "ü•ïüç¨",
    price: 12,
    growTime: 9000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–°–∞—Ö–∞—Ä–Ω–∞—è —Å–≤–µ–∫–ª–∞",
    emoji: "üç≠üç†",
    price: 10,
    growTime: 8000,
    rarity: "–æ–±—ã—á–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ñ–µ–ª–µ–π–Ω—ã–π –∞—Ä–±—É–∑",
    emoji: "üçâüß°",
    price: 15,
    growTime: 10000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ü—É–∑—ã—Ä–∏—Å—Ç–∞—è –≤–∏—à–Ω—è",
    emoji: "üçíü´ß",
    price: 17,
    growTime: 10500,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ü–∞–ø—Ä–∏–∫–∞-–ø—É—à–∫–∞",
    emoji: "üå∂Ô∏èüí•",
    price: 19,
    growTime: 11000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω—ã–π –ª–∏–º–æ–Ω",
    emoji: "üçã‚ö°",
    price: 21,
    growTime: 11500,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ö–ª—É–±–Ω–∏–∫–∞ —Å –Ω–µ–±–∞",
    emoji: "üçì‚òÅÔ∏è",
    price: 23,
    growTime: 12000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ü—ã–ª–∞—é—â–∞—è —Ç—ã–∫–≤–∞",
    emoji: "üéÉüî•",
    price: 26,
    growTime: 12500,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–Ø–≥–æ–¥–∞-—Å—Ñ–µ—Ä–∞",
    emoji: "ü´ê‚öôÔ∏è",
    price: 28,
    growTime: 13000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ó–≤—ë–∑–¥–Ω—ã–π –ø–æ–º–∏–¥–æ—Ä",
    emoji: "üçÖüå†",
    price: 30,
    growTime: 13500,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–õ—É–Ω–Ω–∞—è –∫–ª—É–±–Ω–∏–∫–∞",
    emoji: "üçìüåô",
    price: 33,
    growTime: 14000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ó–æ–ª–æ—Ç–æ–π –±–∞–Ω–∞–Ω",
    emoji: "üçå‚ú®",
    price: 35,
    growTime: 14500,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–†–∞–¥—É–∂–Ω–∞—è —Ä–µ–¥—å–∫–∞",
    emoji: "üåÄü•ó",
    price: 38,
    growTime: 15000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–í—É–ª–∫–∞–Ω–∏—á–µ—Å–∫–∞—è –≥—Ä—É—à–∞",
    emoji: "üçêüåã",
    price: 40,
    growTime: 15500,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–•—Ä—É—Å—Ç–∞–ª—å–Ω–∞—è –¥—ã–Ω—è",
    emoji: "üçàüíé",
    price: 43,
    growTime: 16000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ê—Å—Ç—Ä–∞–ª—å–Ω—ã–π –∏–Ω–∂–∏—Ä",
    emoji: "üååüçá",
    price: 46,
    growTime: 16500,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ù–µ–æ–Ω–æ–≤—ã–π –∞–ø–µ–ª—å—Å–∏–Ω",
    emoji: "üçäüí°",
    price: 50,
    growTime: 17000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–°–≤–µ—Ç–æ—Ñ—Ä—É–∫—Ç",
    emoji: "üí°üçè",
    price: 52,
    growTime: 17500,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
  },
  {
    name: "–°–æ–ª–Ω–µ—á–Ω—ã–π –∫–æ–∫–æ—Å",
    emoji: "ü••‚òÄÔ∏è",
    price: 55,
    growTime: 18000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ö–æ–º–µ—Ç–Ω–æ–µ –º–∞–Ω–≥–æ",
    emoji: "ü•≠‚òÑÔ∏è",
    price: 58,
    growTime: 18500,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ü–∏–∫—Å–µ–ª—å–Ω–æ–µ —è–±–ª–æ–∫–æ",
    emoji: "üçéüü©",
    price: 60,
    growTime: 19000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞",
    emoji: "ü•¨üåå",
    price: 65,
    growTime: 19500,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–Ø–¥—Ä–æ –ø–µ—Ä—Å–∏–∫–∞",
    emoji: "üçëüîò",
    price: 68,
    growTime: 20000,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ì—Ä–æ–∑–æ–≤–æ–π –º–∞–Ω–¥–∞—Ä–∏–Ω",
    emoji: "üçäüå©Ô∏è",
    price: 70,
    growTime: 20500,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–¢–∞–π–Ω–∞—è –∫–ª—É–±–Ω–∏–∫–∞",
    emoji: "üçìüïµÔ∏è",
    price: 75,
    growTime: 21000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –¥—ã–Ω—è",
    emoji: "üçàü™ê",
    price: 97,
    growTime: 22000,
    rarity: "–º–∏—Ñ–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ú–∞–≥–Ω–∏—Ç–Ω–∞—è –º–æ—Ä–∫–æ–≤–∫–∞",
    emoji: "ü•ïüß≤",
    price: 550,
    growTime: 23000,
    rarity: "–º–∏—Ñ–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ü–ª–æ–¥ –ø–æ—Ä—Ç–∞–ª–∞",
    emoji: "üåÄüçí",
    price: 850,
    growTime: 24000,
    rarity: "–º–∏—Ñ–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–†–∞—Å—Ç–µ–Ω–∏–µ –≤–µ—á–Ω–æ—Å—Ç–∏",
    emoji: "‚ôæÔ∏èüåø",
    price: 999,
    growTime: 25000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ü—Ä–∏–∑—Ä–∞—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ",
    emoji: "üå≥üëª",
    price: 78,
    growTime: 30000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },
  {
    name: "–ì–æ—Ä—è—â–∞—è –≥–æ–ª—É–±–∏–∫–∞",
    emoji: "üî•ü´ê",
    price: 1500,
    growTime: 50000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–°–ª–µ–ø–∞—è –º–∞—Ä–∞–∫—É–π—è",
    emoji: "ü•≠üëì",
    price: 2222,
    growTime: 70000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ö–æ—Å—Ç—è–Ω–æ–π –∞–±—Ä–∏–∫–æ—Å ",
    emoji: "ü´êü¶¥",
    price: 5000,
    growTime: 1000000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ù–µ–æ–Ω–æ–≤—ã–π –±–∞–Ω–∞–Ω",
    emoji: "üååüçå",
    price: 1000000,
    growTime: 10000000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ–∫–æ–µ",
    favorite: false

  },
    {
    name: "–ê—Å—Ç—Ä–∞–ª—å–Ω—ã–π –ª–æ—Ç–æ—Å",
    emoji: "üå†ü™∑",
    price:  100000000,
    growTime: 10000000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  { 
  name: "–ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ —Å–µ–º—è", 
  emoji: "üåå", 
  price: 230000000, 
  growTime: 60000000,  // 60 —Å–µ–∫—É–Ω–¥
  rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–π" 
},
  {
    name: "–ú–µ–¥–æ–≤—ã–π –∫–∞–∫—Ç—É—Å",
    emoji: "üçØüåµ",
    price: 900000000,
    growTime: 80000000, // 60 —Å–µ–∫—É–Ω–¥
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–µ",
  },
  {
    name: "–°–≤–µ—Ä—Ö–Ω–æ–≤–∞",
    emoji: "üéáüåå",
    price: 1000000000,
    growTime: 600000000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ–∫–æ–µ",
    favorite: false



  },

];

const rarityOrder = {
  –æ–±—ã—á–Ω–æ–µ: 1,
  —Ä–µ–¥–∫–æ–µ: 2,
  —ç–ø–∏—á–µ—Å–∫–æ–µ: 3,
  –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ: 4,
  –º–∏—Ñ–∏—á–µ—Å–∫–æ–µ: 5,
};

// –°–ø–∏—Å–æ–∫ –∫–æ–¥–æ–≤
const redeemCodes = {
  "ECLIPSEEVENTISHERE": 50000000000,
  "GROWANDSELL2025": 50000000000,
  "ADMINABUSE": 10000000000, 
  "1BILLION": 1,
  "aunxzzISHERE": 50000000000,// –∫–æ–¥ -> –Ω–∞–≥—Ä–∞–¥–∞
};

let usedCodes = []; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–¥—ã

function redeemCode() {
  const input = document.getElementById("redeemInput").value.trim().toUpperCase();
  const message = document.getElementById("redeemMessage");

  if (!input) {
    message.textContent = "‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥!";
    return;
  }

  if (usedCodes.includes(input)) {
    message.textContent = "‚ö†Ô∏è –≠—Ç–æ—Ç –∫–æ–¥ —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!";
    return;
  }

  if (redeemCodes[input]) {
    money += redeemCodes[input];
    usedCodes.push(input);
    message.textContent = `‚úÖ –ö–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${redeemCodes[input]} üí∞`;
    updateMoney();
  } else {
    message.textContent = "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥!";
  }
}



seeds.sort((a, b) => rarityOrder[a.rarity] - rarityOrder[b.rarity]);

function save() {
  localStorage.setItem("money", money);
  localStorage.setItem("slots", slots);
  localStorage.setItem("watering", watering);
  localStorage.setItem("garden", JSON.stringify(garden));
  if (money > bestMoney) {
    bestMoney = money;
    localStorage.setItem("bestMoney", bestMoney);
  }
}

function updateUI() {
  document.getElementById("money").textContent = money;
  renderGarden();
}

function renderGarden() {
  const gardenDiv = document.getElementById("garden");
  gardenDiv.innerHTML = "";

  for (let i = 0; i < slots; i++) {
    const plot = document.createElement("div");
plot.className = "plot";
if (currentPlotSkin === "night") {
  plot.classList.add("night-skin");
}



    const plant = garden[i];
    if (plant) {
      plot.textContent = plant.emoji;
      if (!plant.ready) {
        plot.classList.add("growing");
      }
      if (plant.ready) {
        plot.innerHTML += `<div class="tooltip">–ì–æ—Ç–æ–≤–æ! (${plant.name})</div>`;
        plot.onclick = () => {
         money += Math.floor(plant.price * 1.5 * getRebirthBonus());
          garden[i] = null;
          updateUI();
          save();
        };
      } else {
        const percent = Math.floor(
          ((Date.now() - plant.start) / plant.time) * 100,
        );
        plot.innerHTML += `<div class="tooltip">${plant.rarity} ‚Ä¢ ${percent}%</div>`;
      }
    } else {
      plot.onclick = () => plantSeed(i);
    }

    gardenDiv.appendChild(plot);
  }
}

function renderSeeds() {
  const rarityOrder = {
    –æ–±—ã—á–Ω–æ–µ: 1,
    —Ä–µ–¥–∫–æ–µ: 2,
    —ç–ø–∏—á–µ—Å–∫–æ–µ: 3,
    –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ: 4,
    –º–∏—Ñ–∏—á–µ—Å–∫–æ–µ: 5,
  };

  seeds.sort((a, b) => rarityOrder[a.rarity] - rarityOrder[b.rarity]);

  const seedButtons = document.getElementById("seedButtons");
  seedButtons.innerHTML = "";
  seeds.forEach((seed, index) => {
    const btn = document.createElement("button");
    btn.textContent = `${seed.emoji} ${seed.name} (${seed.price}üí∞)`;
    btn.onclick = () => {
      selectedSeed = index;
      toggleShop();
    };
    seedButtons.appendChild(btn);
  });
}

let selectedSeed = null;

function plantSeed(i) {
  if (selectedSeed === null) return;
  const seed = seeds[selectedSeed];
  if (money < seed.price) return;

  money -= seed.price;
  const time = seed.growTime - watering * 1000;
  garden[i] = {
    ...seed,
    start: Date.now(),
    time: time,
    ready: false,
  };

  growPlant(i);
  updateUI();
  save();
  updateQuestProgress(0, 1); // –ü–æ—Å–∞–¥–∫–∞ —Ä–∞—Å—Ç–µ–Ω–∏—è
}

function growPlant(i) {
  const interval = setInterval(() => {
    const plant = garden[i];
    if (!plant) return clearInterval(interval);
    if (Date.now() - plant.start >= plant.time) {
    const timePassed = Date.now() - plant.start;
const growTime = boosts.speed ? plant.time * 0.5 : plant.time; // ‚ö° –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å —Ä–æ—Å—Ç–∞
if (timePassed >= growTime) {
// üé® –£–ª—É—á—à–µ–Ω–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏
let roll = Math.random();
if (roll < 0.05) { // 5% —à–∞–Ω—Å –Ω–∞ –º—É—Ç–∞—Ü–∏—é
  let type;
  if (roll < 0.03) { // 3% –æ–±—ã—á–Ω—ã–µ —Ä–µ–¥–∫–∏–µ
    type = ["silver", "gold"][Math.floor(Math.random() * 2)];
  } else if (roll < 0.049) { // 1.9% —à–∞–Ω—Å –Ω–∞ —Ä–∞–¥—É–∂–Ω–æ–µ
    type = "rainbow";
  } else { // 0.1% —Å—É–ø–µ—Ä-—Ä–µ–¥–∫–æ–µ
    type = "cosmic";
  }

  if (type === "silver") {
    plant.price *= 2;
    plant.emoji = "ü•à" + plant.emoji;
    plant.mutation = "–°–µ—Ä–µ–±—Ä—è–Ω–æ–µ üåü (√ó2 –¥–µ–Ω—å–≥–∏)";
  }
  if (type === "gold") {
    plant.price *= 5;
    plant.emoji = "ü•á" + plant.emoji;
    plant.mutation = "–ó–æ–ª–æ—Ç–æ–µ üí∞ (√ó5 –¥–µ–Ω—å–≥–∏)";
  }
  if (type === "rainbow") {
    plant.price *= 10;
    plant.emoji = "üåà" + plant.emoji;
    plant.mutation = "–†–∞–¥—É–∂–Ω–æ–µ üåà (√ó10 –¥–µ–Ω—å–≥–∏ + +50% —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–æ—Å—Ç–∞)";
    plant.growTime = Math.floor(plant.growTime * 0.5); // –±—ã—Å—Ç—Ä–µ–µ —Ä–∞—Å—Ç—ë—Ç
  }
  if (type === "cosmic") {
    plant.price *= 50;
    plant.emoji = "‚ú®" + plant.emoji;
    plant.mutation = "–ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ üöÄ (√ó50 –¥–µ–Ω—å–≥–∏ + –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç)";
    plant.ready = true; // —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤–æ
  }
}

  plant.ready = true;
  updateUI();
  save();
  clearInterval(interval);
}

    }
  }, 1000);
}

function buySlot() {
  if (slots >= maxSlots) {
    alert("–ú–∞–∫—Å–∏–º—É–º –≥—Ä—è–¥–æ–∫ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç! üåæ");
    return;
  }

  if (money >= 15) {
    money -= 15;
    slots += 1;
    garden.push(null);
    updateUI();
    save();
  } else {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —à–∞–∫–∏–ª–µ–π!");
  }
}

function buyWatering() {
  if (money >= 10) {
    money -= 10;
    watering += 1;
    updateUI();
    save();
  }
}

function loadGrowth() {
  garden.forEach((plant, i) => {
    if (plant && !plant.ready) {
      growPlant(i);
    }
  });
}

function animateMoney() {
  const display = document.getElementById("money");
  if (!display) return;

  if (displayedMoney !== money) {
    displayedMoney += (money - displayedMoney) * 0.1;
    if (Math.abs(money - displayedMoney) < 0.5) {
      displayedMoney = money;
    }
    display.textContent = Math.floor(displayedMoney);
  }

  requestAnimationFrame(animateMoney);
}

function harvestAll() {
  let harvested = false;
  for (let i = 0; i < garden.length; i++) {
    const plant = garden[i];
    if (plant && plant.ready) {
     money += Math.floor(plant.price * 1.5 * getRebirthBonus());

      garden[i] = null;
      harvested = true;
    }
  }
  if (harvested) {
    updateUI();
    save();
  } else {
    alert("–ù–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π! üå±");
  }
  updateQuestProgress(1, 1); // –°–±–æ—Ä —É—Ä–æ–∂–∞—è
  let earned = Math.floor(plant.price * 1.5); // —Å–∫–æ–ª—å–∫–æ –∑–∞—Ä–∞–±–æ—Ç–∞–ª –∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏–µ
  money += earned; // –¥–æ–±–∞–≤–ª—è–µ–º –∫ –¥–µ–Ω—å–≥–∞–º
  updateQuestProgress(4, earned); // –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–≤–µ—Å—Ç–∞ –ø–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º –¥–µ–Ω—å–≥–∞–º
}

function toggleShop() {
  const shop = document.getElementById("plantShop");
  shop.classList.toggle("hidden");
}

function showRecords() {
  document.getElementById("game").style.display = "none";
  document.getElementById("recordsScreen").style.display = "block";
  document.getElementById("bestMoneyDisplay").textContent = bestMoney;
}

function hideRecords() {
  document.getElementById("recordsScreen").style.display = "none";
  document.getElementById("game").style.display = "block";
}

function startRecordUpdateTimer(seconds) {
  const timerDisplay = document.getElementById("updateTime");

  function update() {
    const min = Math.floor(seconds / 60)
      .toString()
      .padStart(2, "0");
    const sec = (seconds % 60).toString().padStart(2, "0");
    timerDisplay.textContent = `${min}:${sec}`;

    if (seconds <= 0) {
      clearInterval(timerInterval);
      timerDisplay.textContent = "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...";
      // –º–æ–∂–µ—à—å —Ç—É—Ç –≤—ã–∑–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —Å–∫—Ä—ã—Ç—å
    }

    seconds--;
  }

  update();

  const timerInterval = setInterval(update, 1000);
}

function spinRoulette() {
  const today = new Date().toDateString();

  // –°–±—Ä–æ—Å –µ—Å–ª–∏ –Ω–æ–≤—ã–π –¥–µ–Ω—å
  if (lastRouletteDate !== today) {
    rouletteSpinsToday = 0;
    lastRouletteDate = today;
    localStorage.setItem("lastRouletteDate", today);
    localStorage.setItem("rouletteSpinsToday", rouletteSpinsToday);
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
  if (rouletteSpinsToday >= 3) {
    alert("‚ùå –°–µ–≥–æ–¥–Ω—è –ª–∏–º–∏—Ç –ø—Ä–æ–∫—Ä—É—Ç–æ–∫ –∏—Å—á–µ—Ä–ø–∞–Ω (3/3). –ü–æ–ø—Ä–æ–±—É–π –∑–∞–≤—Ç—Ä–∞!");
    return;
  }

  if (money < 5_000) {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –®–∞–∫–∏–ª–µ–π!");
    return;
  }

  money -= 5_000;
  save();
  updateUI();

  const text = document.getElementById("rouletteText");
  text.textContent = "üé≤ –†—É–ª–µ—Ç–∫–∞ –∫—Ä—É—Ç–∏—Ç—Å—è...";
  text.classList.add("shake");

  const rewards = [
    { amount: 10_000, chance: 55 },
    { amount: 50_000, chance: 50 },
    { amount: 1_000_000, chance: 35 },
    { amount: 10_000_000, chance: 20 },
    { amount: 50_000_000, chance: 10 },
    { amount: 100_000_000, chance: 7 },
    { amount: 500_000_000, chance: 5 },
    { amount: 1_000_000_000, chance: 1 },
  ];

  setTimeout(() => {
    text.classList.remove("shake");

    let roll = Math.random() * 100;
    let sum = 0;
    let reward = 0;
    for (let r of rewards) {
      sum += r.chance;
      if (roll <= sum) {
        reward = r.amount;
        break;
      }
    }

    text.textContent = `üéâ –¢—ã –≤—ã–∏–≥—Ä–∞–ª ${reward.toLocaleString()} –®–∞–∫–∏–ª–µ–π!`;
    money += reward;
    save();
    updateUI();

    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
    rouletteSpinsToday++;
    localStorage.setItem("rouletteSpinsToday", rouletteSpinsToday);
  }, 2000);
}

let boosts = {
  speed: false,
  money: false,
  extraSpin: 0,
};

function buyBoost(type, duration, cost) {
  if (money >= cost) {
    money -= cost;
    activateBoost(type, duration);
    save();
    updateUI();
  } else {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –®–∞–∫–∏–ª–µ–π!");
  }
}

function activateBoost(type, duration) {
  if (type === "speed") {
    boosts.speed = true;
    setTimeout(() => (boosts.speed = false), duration);
    alert("‚ö° –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å —Ä–æ—Å—Ç–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ 10 –º–∏–Ω—É—Ç!");
  }
  if (type === "extraSpin") {
    boosts.extraSpin += 1;
    alert("üé≤ –í—ã –ø–æ–ª—É—á–∏–ª–∏ +1 –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Ä—É–ª–µ—Ç–∫–∏!");
  }
}


let rebirths = parseInt(localStorage.getItem("rebirths")) || 0;

function tryRebirth() {
  if (money >= 999_000_000_000) {
    if (confirm("‚ö° –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ! –í—Å—ë —Å–±—Ä–æ—Å–∏—Ç—Å—è, –Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–ª–∏—á–∞—Ç—Å—è.")) {
      rebirths++;
      localStorage.setItem("rebirths", rebirths);
      money = 20;
      slots = 3;
      garden = [];
      watering = 0;
      save();
      updateUI();
      alert("‚ú® –¢—ã —Å–¥–µ–ª–∞–ª –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ! –í—Å–µ–≥–æ: " + rebirths);
    }
  } else {
    alert("‚ùå –ù—É–∂–Ω–æ 999 –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è!");
  }
}

// –±–æ–Ω—É—Å –¥–æ—Ö–æ–¥–∞ –ø—Ä–∏ —Å–±–æ—Ä–µ
function getRebirthBonus(multiplier = 1) {
  return 1 + rebirths * 0.1;
}









const bgMusic = document.getElementById("bg-music");

document.addEventListener("click", () => {
  if (bgMusic.paused) {
    bgMusic.play();
  }
});

const startScreen = document.getElementById("start-screen");
const gameContainer = document.getElementById("game-container");

startScreen.addEventListener("click", () => {
  startScreen.style.display = "none";
  gameContainer.style.filter = "blur(0)";
});










function checkAchievements() {
  if (totalPlanted > 0) unlockAchievement(1);
  if (money >= 1000) unlockAchievement(2);
  if (money >= 1000000) unlockAchievement(3);
  if (purchasedSeeds.length >= 10) unlockAchievement(4);
  if (harvestCount >= 500) unlockAchievement(5);
  if (maxPlots >= 50) unlockAchievement(6);
  if (gotMutation) unlockAchievement(7);
  if (localStorage.getItem("voted") === "true") unlockAchievement(8);
  if (money >= 1000000000) unlockAchievement(9);
  if (money >= 1000000000000) unlockAchievement(10);
}




/* ===============================
   AUNXZZ ABUSE SHOWCASE V2
   Visual-only; autostart by version
   =============================== */

const GAME_VERSION_FOR_ABUSE = "v124"; // <- –ø–æ–º–µ–Ω—è–π –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∞–ø–¥–µ–π—Ç–µ
const AUNXZZ_DONE_KEY = "aunxzz_abuse_done_" + GAME_VERSION_FOR_ABUSE;

// –µ—Å–ª–∏ —É–∂–µ –±—ã–ª ‚Äî –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å
if (!localStorage.getItem(AUNXZZ_DONE_KEY)) {
  // —Å—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ 3 —Å–µ–∫ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
  setTimeout(() => startAunxzzShowcase(), 3000);
}

/* ---------- –û—Å–Ω–æ–≤–Ω–æ–π flow ---------- */
function startAunxzzShowcase() {
  if (document.body._aunxzz_running) return;
  document.body._aunxzz_running = true;

  // –°–æ—Ö—Ä–∞–Ω–∏–º —Ç–µ–∫—É—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
  const original = {
    bodyBg: document.body.style.background || "",
    bodyTransform: document.body.style.transform || ""
  };

  // 1) –í—Ö–æ–¥ –∞–¥–º–∏–Ω–∞
  adminMsg("üë§ Aunxzz –≤–æ—à—ë–ª –≤ –∏–≥—Ä—É...");
  setTimeout(() => adminMsg("‚úÖ Aunxzz –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ Grow & Sell Network"), 2600);
  setTimeout(() => adminMsg(":)"), 5200);

  // 2) –ß–µ—Ä–µ–∑ 5s ‚Äî –æ–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç 10..1 (—Å –≤–∏–±—Ä–∞—Ü–∏–µ–π)
  setTimeout(() => startCountdown(10, () => {
    // 3) –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –∂–µ—Å—Ç–∫–æ–µ –¥–∏—Å–∫–æ + Cosmic Rain + —Å–µ—Ä–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    startLongDiscoAndRain(original, () => {
      // 4) –í–æ–ø—Ä–æ—Å –æ–± OG-–∏–≤–µ–Ω—Ç–µ (—Å–æ–æ–±—â–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É, –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
      adminMsg("–†–µ–±—è—Ç–∞, —Ö–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å –ø–µ—Ä–≤—ã–π OG –∞–¥–º–∏–Ω –∏–≤–µ–Ω—Ç? (—á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã —è —Ä–µ—à–∞—é –∏ –∑–∞–ø—É—Å–∫–∞—é)", 0, 9000);

      // 5) –ñ–¥—ë–º —Ä–æ–≤–Ω–æ 2 –º–∏–Ω—É—Ç—ã (120000 ms), –ø–æ–∫–∞ –∏–¥—ë—Ç background disco
      setTimeout(() => {
        adminMsg("–û–∫–µ–π —Ä–µ–±—è—Ç–∞, —è –∑–∞–ø—É—Å–∫–∞—é)", 0, 5000);
        // 6) –ó–∞–ø—É—Å–∫ OG: –∞–Ω–∏–º–µ-—á—ë—Ä–Ω–∞—è –¥—ã—Ä–∞ -> —Å–≤–µ—Ä—Ö–Ω–æ–≤–∞
        startBlackHoleSupernova(original, () => {
          // 7) –ü–æ—Å–ª–µ —Å—É–ø–µ—Ä–Ω–æ–≤—ã ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
          adminMsg("–Ø –Ω–∞–¥–µ—é—Å—å, –¥—Ä—É–∑—å—è, —á—Ç–æ –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å ;)", 0, 7000);
          adminMsg("üß° –°–ø–∞—Å–∏–±–æ –≤—Å–µ–º, –∫—Ç–æ –ø—Ä–∏—à—ë–ª –Ω–∞ Halloween Jackpot Update! –ü—Ä–æ–º–æ–∫–æ–¥:ECLIPSEEVENTISHERE", 7000, 7000);
          adminMsg("üí´ –î–æ –≤—Å—Ç—Ä–µ—á–∏ –≤ —Å–ª–µ–¥—É—é—â–µ–π –æ–±–Ω–æ–≤–µ!", 14000, 7000);

          // 8) –§–∏–Ω–∞–ª—å–Ω–∞—è –¥–∏—Å–∫–æ-–ø–∞—Ä—Ç–∏—è-–ø–ª–∞–≤–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∏ —â—ë–ª—á–æ–∫
          setTimeout(() => startReturnDiscoThenSnap(original, () => {
            // –ø–æ–º–µ—Ç–∫–∞ —á—Ç–æ –∏–≤–µ–Ω—Ç –ø—Ä–æ—à—ë–ª
            try { localStorage.setItem(AUNXZZ_DONE_KEY, "true"); } catch(e){}
            document.body._aunxzz_running = false;
          }), 22000);
        });
      }, 120000);
    });
  }), 5000);
}

/* ---------- UI: –∞–¥–º–∏–Ω—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É (—Å–ª–µ–¥—É—é—Ç –∑–∞ viewport) ---------- */
/* text ‚Äî —Å—Ç—Ä–æ–∫–∞; delay optional; life ‚Äî ms visible (default 7000) */
function adminMsg(text, delay = 0, life = 7000) {
  setTimeout(() => {
    const el = document.createElement("div");
    el.className = "aunxzz_admin_message";
    el.innerHTML = `<span style="color:#ff2b2b;font-weight:800;margin-right:8px;">aunxzz ‚úÖ</span> ${escapeHtml(text)}`;
    Object.assign(el.style, {
      position: "fixed",
      top: "18px",
      left: "50%",
      transform: "translateX(-50%) translateY(-6px)",
      zIndex: 2147483647,
      background: "rgba(0,0,0,0.76)",
      color: "#fff",
      padding: "12px 20px",
      borderRadius: "12px",
      border: "2px solid rgba(255,60,60,0.95)",
      fontFamily: "monospace",
      fontSize: "18px",
      textAlign: "center",
      textShadow: "0 0 12px rgba(255,0,0,0.18)",
      pointerEvents: "none",
      opacity: "0",
      transition: "opacity 0.45s, transform 0.45s"
    });
    document.body.appendChild(el);
    // –ø–æ—è–≤–ª–µ–Ω–∏–µ
    requestAnimationFrame(() => {
      el.style.opacity = "1";
      el.style.transform = "translateX(-50%) translateY(0)";
    });
    // –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
    setTimeout(() => {
      el.style.opacity = "0";
      el.style.transform = "translateX(-50%) translateY(-12px)";
      setTimeout(() => { try{ el.remove(); } catch(e){} }, 500);
    }, Math.max(3000, life));
  }, delay);
}
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

/* ---------- –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç (—Å –≤–∏–±—Ä–∞—Ü–∏–µ–π) ---------- */
function startCountdown(start, onComplete) {
  const wrap = document.createElement("div");
  Object.assign(wrap.style, {
    position: "fixed", inset: "0", display: "flex", alignItems: "center", justifyContent: "center",
    background: "rgba(0,0,0,0.88)", zIndex: 2147483640
  });
  const num = document.createElement("div");
  Object.assign(num.style, {
    fontFamily: "monospace", fontSize: "110px", fontWeight: "900",
    color: "#ff3b3b", textShadow: "0 0 28px #ff0000", transform: "scale(1)"
  });
  wrap.appendChild(num);
  document.body.appendChild(wrap);

  let n = start;
  const iv = setInterval(() => {
    num.textContent = n;
    // vibrate pattern short (if mobile)
    if (navigator.vibrate) navigator.vibrate(120);
    // small flash/scale
    wrap.style.opacity = "1";
    num.style.transform = `scale(${1 + Math.random()*0.06})`;
    num.style.color = `hsl(${Math.random()*360},100%,60%)`;
    n--;
    if (n < 0) {
      clearInterval(iv);
      try{ wrap.remove(); }catch(e){}
      if (onComplete) onComplete();
    }
  }, 1000);
}

/* ---------- Long Disco + Cosmic Rain + paced messages ---------- */
function startLongDiscoAndRain(originalStyles, onComplete) {
  // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∏—Å–∫–æ –ø–µ—Ä–µ–¥ –≤–æ–ø—Ä–æ—Å–æ–º ‚Äî –¥–µ–ª–∞–µ–º ~70-80s
  const DURATION = 80000; // 80s
  const intervals = [];

  // 1) –ñ—ë—Å—Ç–∫–∏–π —ç–∫—Ä–∞–Ω-—à–µ–π–∫
  intervals.push(setInterval(()=>{
    document.body.style.transform = `translate(${(Math.random()-0.5)*14}px, ${(Math.random()-0.5)*14}px) rotate(${(Math.random()-0.5)*0.8}deg)`;
  }, 40));

  // 2) –ë—ã—Å—Ç—Ä—ã–π RGB —Ñ–æ–Ω
  intervals.push(setInterval(()=>{
    document.body.style.background = `linear-gradient(120deg, hsl(${Math.random()*360},100%,50%), hsl(${Math.random()*360},100%,55%))`;
  }, 140));

  // 3) Cosmic Rain spawn (repeating bursts)
  const rainIv = setInterval(()=> spawnCosmicRainBurst(), 2200);
  intervals.push(rainIv);

  // 4) –ü–ª–∞–≤–Ω—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–∏—Å–∫–æ
  const discoMessages = [
    "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ ABUSE!",
    "üíø –ù–∞—á–∏–Ω–∞–µ–º –¥–∏—Å–∫–æ-—Ä–µ–∂–∏–º!",
    "–ù–û–í–´–ô –ü–†–û–ú–û! ECLIPSEEVENTISHERE",
    "–ª–∞–¥–Ω–æ —Ç–∞–∫ —É–∂ –∏ –±—ã—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–æ —ç—Ç–æ ADMINABUSE",
  ];
  discoMessages.forEach((m, i) => adminMsg(m, i * 8000 + 4000, 7000));

  // 5) spawn big confetti early
  spawnConfetti(110);

  // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–∏—Å–∫–æ
  setTimeout(()=>{
    intervals.forEach(id => clearInterval(id));
    document.body.style.transform = originalStyles.bodyTransform || "";
    document.body.style.background = originalStyles.bodyBg || "";
    onComplete?.();
  }, DURATION);
}

/* –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –≤–∏–∑—É–∞–ª—ã: Cosmic Rain burst –∏ confetti */
function spawnCosmicRainBurst() {
  const symbols = ["‚òÑÔ∏è","üí´","üåå","‚ú®","üå†"];
  for (let i=0;i<20;i++){
    const el = document.createElement("div");
    el.textContent = symbols[Math.floor(Math.random()*symbols.length)];
    Object.assign(el.style, {
      position: "fixed",
      left: `${20 + Math.random()*60}%`,
      top: "-40px",
      fontSize: `${18 + Math.random()*28}px`,
      zIndex: 999990,
      pointerEvents: "none",
      opacity: "1",
      transform: `rotate(${Math.random()*360}deg)`
    });
    document.body.appendChild(el);
    setTimeout(()=> {
      el.style.transition = `transform ${2.5 + Math.random()*2}s linear, opacity ${2.5 + Math.random()*2}s`;
      el.style.transform = `translateY(${window.innerHeight + 120}px) rotate(${Math.random()*720}deg)`;
      el.style.opacity = "0";
    }, 40 + Math.random()*200);
    setTimeout(()=> { try{ el.remove(); } catch(e){} }, 5000);
  }
}

function spawnConfetti(amount = 60) {
  const pieces = ["üéâ","üéä","‚ú®","üí´","ü™©","üîÆ","üü£"];
  for (let i=0;i<amount;i++){
    const d = document.createElement("div");
    d.textContent = pieces[Math.floor(Math.random()*pieces.length)];
    const size = Math.random()*28 + 18;
    Object.assign(d.style, {
      position: "fixed",
      left: `${Math.random()*100}%`,
      top: "-40px",
      fontSize: `${size}px`,
      zIndex: 999990,
      pointerEvents: "none",
      transform: `rotate(${Math.random()*360}deg)`,
      opacity: 1,
      transition: `transform ${3+Math.random()*4}s linear, opacity ${3+Math.random()*4}s linear`
    });
    document.body.appendChild(d);
    setTimeout(()=> {
      d.style.transform = `translateY(${window.innerHeight + 200}px) rotate(${Math.random()*720}deg)`;
      d.style.opacity = "0";
    }, 80 + Math.random()*400);
    setTimeout(()=> { try{ d.remove(); } catch(e){} }, 7500);
  }
}

/* ---------- Pumpkin Storm (spooky) ---------- */
function startPumpkinStorm(originalStyles, onComplete) {
  // Not used separately in this flow but left for completeness
  const DURATION = 45000; // 45s
  const ivs = [];
  ivs.push(setInterval(()=> {
    document.body.style.background = `linear-gradient(90deg, #3b0000, #ff6a00)`;
    document.body.style.transform = `translate(${(Math.random()-0.5)*8}px, ${(Math.random()-0.5)*8}px)`;
  }, 120));
  // spawn pumpkins periodically
  const spawn = setInterval(()=> {
    const p = document.createElement("div");
    p.textContent = ["üéÉ","üíÄ","üï∑Ô∏è","üï∏Ô∏è"][Math.floor(Math.random()*4)];
    Object.assign(p.style, {
      position: "fixed",
      left: `${Math.random()*100}%`,
      top: "-40px",
      fontSize: `${22 + Math.random()*30}px`,
      zIndex: 999990,
      opacity: 1,
      transition: `transform ${3+Math.random()*4}s linear, opacity ${3+Math.random()*4}s linear`,
      pointerEvents: "none"
    });
    document.body.appendChild(p);
    setTimeout(()=> { p.style.transform = `translateY(${window.innerHeight + 200}px) rotate(${Math.random()*720}deg)`; p.style.opacity = "0"; }, 50);
    setTimeout(()=> { try{ p.remove(); } catch(e){} }, 7000);
  }, 600);
  ivs.push(spawn);

  setTimeout(()=> { ivs.forEach(clearInterval); document.body.style.background = originalStyles.bodyBg || ""; document.body.style.transform = originalStyles.bodyTransform || ""; onComplete?.(); }, DURATION);
}

/* ---------- Black hole (anime) -> supernova ---------- */
function startBlackHoleSupernova(originalStyles, onDone) {
  // Create hole coming from top, anime-style
  const wrap = document.createElement("div");
  Object.assign(wrap.style, {
    position: "fixed",
    left: "50%",
    top: "-30%",
    transform: "translateX(-50%)",
    zIndex: 2147483620,
    pointerEvents: "none"
  });
  const hole = document.createElement("div");
  Object.assign(hole.style, {
    width: "260px", height: "260px", borderRadius: "50%",
    background: "radial-gradient(circle,#000 0%, #2a0033 50%, #000 100%)",
    boxShadow: "0 0 120px #6f00ff inset, 0 0 160px #4a00ff",
    transform: "scale(0.18)",
    transition: "transform 1.1s cubic-bezier(.2,.9,.2,1), top 1.1s ease-out"
  });
  wrap.appendChild(hole);
  document.body.appendChild(wrap);

  // Move into view & grow
  setTimeout(()=> {
    wrap.style.top = "6%";
    hole.style.transform = "scale(1.4) rotate(0deg)";
  }, 60);

  // Start sucking UI elements (buttons)
  setTimeout(()=> {
    const buttons = Array.from(document.querySelectorAll("button"));
    const r = hole.getBoundingClientRect();
    const center = { x: r.left + r.width/2, y: r.top + r.height/2 };
    buttons.forEach((btn, i) => {
      const br = btn.getBoundingClientRect();
      const bx = br.left + br.width/2, by = br.top + br.height/2;
      const dx = center.x - bx, dy = center.y - by;
      btn.style.transition = `transform 1.6s cubic-bezier(.2,.9,.2,1), opacity 1.6s`;
      btn.style.transform = `translate(${dx}px, ${dy}px) scale(0.04) rotate(${(Math.random()-0.5)*720}deg)`;
      btn.style.opacity = "0";
    });
  }, 700);

  // Expand and hold, then supernova
  setTimeout(()=> {
    hole.style.transform = "scale(2.8) rotate(60deg)";
    hole.style.boxShadow = "0 0 320px #ff66ff inset, 0 0 320px #6600ff";
  }, 2000);

  // Supernova flash & outward particles
  setTimeout(()=> {
    const flash = document.createElement("div");
    Object.assign(flash.style, {
      position: "fixed", inset: "0", zIndex: 2147483646,
      background: "radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0.6) 12%, rgba(255,255,255,0) 42%)",
      opacity: "0", transition: "opacity 0.22s"
    });
    document.body.appendChild(flash);
    requestAnimationFrame(()=> flash.style.opacity = "1");
    setTimeout(()=> { flash.style.opacity = "0"; }, 180);
    setTimeout(()=> { try{ flash.remove(); } catch(e){} }, 420);

    // Particle burst
    for (let i=0;i<80;i++){
      const p = document.createElement("div");
      p.textContent = ["‚ú®","üí•","üåü","‚òÑÔ∏è"][Math.floor(Math.random()*4)];
      Object.assign(p.style, {
        position: "fixed",
        left: `${hole.getBoundingClientRect().left + hole.offsetWidth/2}px`,
        top: `${hole.getBoundingClientRect().top + hole.offsetHeight/2}px`,
        transform: "translate(-50%,-50%)",
        fontSize: `${12 + Math.random()*28}px`,
        zIndex: 2147483646,
        opacity: "1",
        transition: `transform ${800 + Math.random()*1000}ms cubic-bezier(.2,.9,.2,1), opacity ${800 + Math.random()*1000}ms`
      });
      document.body.appendChild(p);
      const ang = Math.random()*Math.PI*2;
      const dist = 240 + Math.random()*420;
      setTimeout(()=> { p.style.transform = `translate(${Math.cos(ang)*dist}px, ${Math.sin(ang)*dist}px)`; p.style.opacity = "0"; }, 30 + Math.random()*100);
      setTimeout(()=> { try{ p.remove(); } catch(e){} }, 1800);
    }

    // Restore buttons with pop
    setTimeout(()=> {
      Array.from(document.querySelectorAll("button")).forEach(btn => {
        btn.style.transition = "transform 600ms cubic-bezier(.2,.9,.2,1), opacity 600ms";
        btn.style.transform = "";
        btn.style.opacity = "1";
      });
    }, 650);

    // Remove hole & finish
    setTimeout(()=> {
      try{ wrap.remove(); } catch(e){}
      onDone?.();
    }, 900);
  }, 6000); // —Å—É–ø–µ—Ä–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ ~6s –ø–æ—Å–ª–µ grow
}

/* ---------- Return disco then snap clean ---------- */
function startReturnDiscoThenSnap(originalStyles, onComplete) {
  const duration = 16000; // gentle disco return 16s
  const iv = setInterval(()=> {
    document.body.style.background = `linear-gradient(90deg, hsl(${Math.random()*360},100%,65%), hsl(${Math.random()*360},90%,55%))`;
  }, 120);
  spawnConfetti(60);
  setTimeout(()=> {
    clearInterval(iv);
    snapAndRestore(originalStyles);
    onComplete?.();
  }, duration);
}

/* ---------- Snap + restore ---------- */
function snapAndRestore(originalStyles) {
  const snap = document.createElement("div");
  Object.assign(snap.style, {
    position: "fixed", inset: "0", background: "#ffffff", zIndex: 2147483647,
    opacity: "0", transition: "opacity 0.45s"
  });
  document.body.appendChild(snap);
  requestAnimationFrame(()=> snap.style.opacity = "1");
  setTimeout(()=> {
    snap.style.opacity = "0";
    setTimeout(()=> {
      try{ snap.remove(); } catch(e){}
      // restore
      document.body.style.background = originalStyles.bodyBg || "";
      document.body.style.transform = originalStyles.bodyTransform || "";
    }, 420);
  }, 650);
}

/* ========== end of AUNXZZ ABUSE SHOWCASE V2 ========== */




animateMoney();
renderSeeds();
updateUI();
loadGrowth();
function loadAdminMessage() {
  fetch("adminMessage.json")
    .then(response => response.json())
    .then(data => {
      if (data.message && data.message.trim() !== "") {
        const msgBox = document.createElement("div");
        msgBox.style.position = "fixed";
        msgBox.style.top = "10px";
        msgBox.style.left = "50%";
        msgBox.style.transform = "translateX(-50%)";
        msgBox.style.background = "rgba(255, 215, 0, 0.9)";
        msgBox.style.color = "#000";
        msgBox.style.padding = "10px 20px";
        msgBox.style.borderRadius = "10px";
        msgBox.style.fontWeight = "bold";
        msgBox.style.zIndex = "9999";
        msgBox.style.boxShadow = "0px 2px 10px rgba(0,0,0,0.3)";
        msgBox.style.animation = "slideDown 0.5s ease-out";
        msgBox.innerText = data.message;
        document.body.appendChild(msgBox);

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
          msgBox.remove();
        }, 5000);
      }
    })
    .catch(err => console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–¥–º–∏–Ω-—Å–æ–æ–±—â–µ–Ω–∏—è", err));
}

// –ê–Ω–∏–º–∞—Ü–∏—è
const style = document.createElement("style");
style.innerHTML = `
@keyframes slideDown {
  from { transform: translate(-50%, -50px); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}`;
document.head.appendChild(style);

loadAdminMessage();

  </script>
</body>
</html>
